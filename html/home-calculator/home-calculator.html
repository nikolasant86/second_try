<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Калькулятор затрат</title>
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
<link rel="stylesheet" href="styles.css">
</head>
<body>


<!-- Навигация -->
<nav>
  <a href="main.html">Главная</a>
  <a href="home-calculator.html">Калькулятор затрат</a>
  <a href="zem-uchastok.html">Земельный участок</a>
</nav>

<h1>Калькулятор затрат на материалы</h1>

<!-- Калькулятор -->
<div class="calculator">
  <h2>Калькулятор затрат на материалы</h2>
  <form id="materialsForm">
    <label for="quantity">Количество материала:</label>
    <input type="number" id="quantity" required min="0" step="any" />

    <label for="costPerUnit">Стоимость за единицу:</label>
    <input type="number" id="costPerUnit" required min="0" step="any" />

    <button type="submit">Рассчитать</button>
  </form>
  <div class="result">
    <strong>Общая стоимость:</strong> <span id="totalCost">0</span>
  </div>
</div>

<script>
document.getElementById('materialsForm').addEventListener('submit', function(e) {
  e.preventDefault(); // отключение стандартной отправки формы

  const quantity = document.getElementById('quantity').value;
  const costPerUnit = document.getElementById('costPerUnit').value;
  const resultSpan = document.getElementById('totalCost');

  fetch('http://localhost:5000/calculate', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ quantity: parseFloat(quantity), costPerUnit: parseFloat(costPerUnit) })
  })
  .then(response => response.json())
  .then(data => {
    if (data.totalCost !== undefined) {
      resultSpan.textContent = data.totalCost.toFixed(2);
    } else if (data.error) {
      alert('Ошибка: ' + data.error);
    }
  })
  .catch(err => {
    alert('Ошибка соединения с сервером');
    console.error(err);
  });
});
</script>


</body>
</html>
